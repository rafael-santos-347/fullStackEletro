<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="js/script.js"></script>
    <title>Contato</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body class="container-fluid px-0">
    <noscript>É necesário habilitar o javascript !</noscript>
    <div id="root"></div>
    <script type="text/babel">
        const Menu = () => {
            return (
                <div className="container-fluid mb-5">
                    <nav className="navbar row bg-danger">
                        <div className="navbar-brand active col-sm-1"><a href="index.html"><div id="feletro"></div></a></div>            
                        <a className="nav-link col-sm-1 px-0 py-0 text-white"  href="produtos.html">Produtos</a>
                        <a className="nav-link col-sm-1 px-0 py-0 text-white"  href="loja.html">Lojas</a>
                        <a className="nav-link col-sm-1 px-0 py-0 text-white"  href="contato.html">Contato</a>
                        <a className="nav-link col-sm-1 px-0 py-0 text-white" href="pedidos.html">Pedidos</a>
                    </nav>
                </div>
            );
        }


        const Contato = () => {

            const [contatos, setContatos] = React.useState([]);

            React.useEffect(async() => {
                const resposta = await fetch('http://localhost/projetos/react/backend/index.php?table=contato');
                setContatos(await resposta.json());
            }, []);

            return(
                <React.Fragment>
                    {contatos.map((elemento) => {
                        return(
                            <section className="card w-25 mt-5 mx-auto" key={elemento.id_contato}>
                                <div className="card-header">
                                   <span className="lead card-text">Nome: {elemento.nome}</span> 
                                </div>
                    
                                <div className="card-body">
                                    <span className="lead card-text">Mensagem: {elemento.mensagem}</span> 
                                </div>

                                <div className="card-footer">
                                    <span className="lead card-text">Data: {elemento.data}</span> 
                                </div>

                            </section>
                        );
                    })}
                </React.Fragment>
            );
        }

        const Main = () => {

            function exibeMsg() {
            return document.getElementById('msg').innerHTML = "Enviado com Sucesso !";
        }

            return (
                <main className="my-4 py-3">
                    <header>
                        <h1 className="text-center text-dark mb-5">Contato</h1><hr />
                    </header>

                    <div className="row container-fluid align-items-center justify-content-center mb-5">
                        <img className="col-sm-1" id="img1" src="imagens/email.jpg" alt="" />
                        <p className="col-sm-4">Contato@fullstackeletro.com</p>
            
                        <img className="col-sm-1" id="img2" src="imagens/whatsapp.jpg" width="50px" alt="" />
                        <p className="col-sm-4">(11) 9999-9999</p>
                    </div>

                    <form className="form-group text-center mt-5 mb-5 container-fluid" action="http://localhost/projetos/react/backend/contato.php" method="get">
                        <div className="row align-items-center justify-content-center">
                        <label htmlFor="nome" className="col-sm-2 col-form-label "><h4>Nome: </h4></label>
                        <input className="form-control-sm col-sm-2 form-control-plaintext" type="text" name="nome" placeholder="Digite seu nome" />
                        </div>
                        <div className="row align-items-center justify-content-center mt-3">
                        <label htmlFor="msg" className="col-sm-2 col-form-label"><h4>Mensagem: </h4></label>
                        <textarea className="form-control-lg col-sm-2 form-control-plaintext" name="msg" placeholder="Digite sua mensagem"></textarea>
                        </div>
                        <div className="row align-items-center justify-content-center">
                        <input className="btn btn-danger col-sm-1 mt-5" onClick={exibeMsg} type="submit" value="Enviar" />
                        </div>
                    </form>

                    <h4 className="display-4 text-center text-dark"> Comentários:</h4>
                    <div className="text-center lead mt-5 mb-5">


                        <Contato />
                    </div>
                 </main>
            );
        }



        const Footer = () => {
            return(
                <footer className="text-center">
                    <h4 className="text-warning lead">Formas de Pagamento</h4>
                    <img className="img_cabeçalho" src="imagens/pag.jpeg" alt="Formas de Pagamento" />
                    <p className="bg-secondary">&copy; Recodepro</p>
                </footer>
            );
        }

        const App = () => {
            return(
                <React.Fragment>
                    <Menu />
                    <Main />
                    <Footer />
                </React.Fragment>
            );
        }


        ReactDOM.render(
            <App />,
            document.getElementById('root')
        );


    </script>
</body>
</html>